<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="生活，我们是认真的！">
<meta property="og:type" content="website">
<meta property="og:title" content="Shining Moon">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="Shining Moon">
<meta property="og:description" content="生活，我们是认真的！">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Shining Moon">
<meta name="twitter:description" content="生活，我们是认真的！">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/3/"/>





  <title> Shining Moon </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Shining Moon</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/13/Z02-canvas常用API/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/13/Z02-canvas常用API/" itemprop="url">
                  canvas常用API
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-13T00:00:00+08:00">
                2016-10-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/canvas/" itemprop="url" rel="index">
                    <span itemprop="name">canvas</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="基本图形绘制"><a href="#基本图形绘制" class="headerlink" title="基本图形绘制"></a>基本图形绘制</h1><h2 id="绘制矩形"><a href="#绘制矩形" class="headerlink" title="绘制矩形"></a>绘制矩形</h2><ul>
<li>rect();没有自己独立的路径，需要配合stroke()</li>
<li>strokeRect();有独立的路径，不需要显式的调用stroke()</li>
<li>fillRect();有独立的路径，不需要显式的进行填充</li>
<li>clearRect();清空指定的矩形区域<blockquote>
<p>参数：x,y,width,height</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.rect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">100</span>);</div><div class="line">    <span class="comment">//需要调用stroke()</span></div><div class="line">   	ctx.stroke();</div><div class="line">    <span class="comment">//有独立的路径，不需要显式的调用stroke()</span></div><div class="line">	<span class="comment">//ctx.strokeRect(100,100,200,240);</span></div><div class="line">    <span class="comment">//有独立的路径，不需要显式的进行填充</span></div><div class="line">    ctx.fillRect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">100</span>);</div><div class="line">    <span class="comment">//清空指定的矩形区域</span></div><div class="line">    ctx.clearRect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<h2 id="save和restore方法"><a href="#save和restore方法" class="headerlink" title="save和restore方法"></a>save和restore方法</h2><ul>
<li>save()保存当前绘制的状态</li>
<li>restore()恢复上次绘制的状态<br><strong>save可以保存多次绘制状态，以栈的形式存储</strong><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.rect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">200</span>);</div><div class="line">    ctx.strokeStyle = <span class="string">"black"</span>;</div><div class="line">    ctx.lineWidth = <span class="number">5</span>;</div><div class="line">    ctx.fillStyle = <span class="string">"orangered"</span>;</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.fill();</div><div class="line">    <span class="comment">//保存上次绘制状态</span></div><div class="line">    <span class="comment">//可以保存多次，以栈格式存储，后进先出</span></div><div class="line">    ctx.save();</div><div class="line">    ctx.beginPath();</div><div class="line">    ctx.rect(<span class="number">200</span>,<span class="number">200</span>,<span class="number">150</span>,<span class="number">150</span>);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.fillStyle = <span class="string">"yellow"</span>;</div><div class="line">    ctx.fill();</div><div class="line">    ctx.beginPath();</div><div class="line">    <span class="comment">//恢复上次绘制状态</span></div><div class="line">    ctx.restore();</div><div class="line">    ctx.rect(<span class="number">50</span>,<span class="number">50</span>,<span class="number">80</span>,<span class="number">80</span>);</div><div class="line">    ctx.stroke();</div><div class="line">    ctx.fill();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="绘制圆弧"><a href="#绘制圆弧" class="headerlink" title="绘制圆弧"></a>绘制圆弧</h2><blockquote>
<p>arc(x,y,r,startAngle,endAngle,bool);<br>参数：圆心，半径，起始的角度，结束的角度，是否逆时针。默认是false，顺时针；true：逆时针</p>
<ul>
<li>绘制简单圆弧<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">	<span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="comment">//绘制圆弧 arc</span></div><div class="line">    <span class="comment">//加上moveTo()会加上一条半径</span></div><div class="line">    <span class="comment">//ctx.moveTo(200,200);</span></div><div class="line">    ctx.arc(<span class="number">200</span>,<span class="number">200</span>,<span class="number">100</span>,<span class="number">0</span>,-<span class="built_in">Math</span>.PI/<span class="number">2</span>);<span class="comment">//默认是顺时针false，true表示逆时针</span></div><div class="line">    ctx.stroke();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li><p>绘制带有圆角的矩形</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">/**</span></div><div class="line">     *  绘制连续的路径，如果前面的终点和后面的起点一样，就不需要重新设置moveTo()</div><div class="line">     */</div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.lineWidth = <span class="number">3</span>;</div><div class="line">    ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">    ctx.lineTo(<span class="number">300</span>,<span class="number">100</span>);</div><div class="line"><span class="comment">//在画圆弧时，上面的直线会对圆弧的绘制造成影响，所以需要从上面直线的终点开始绘制圆弧</span></div><div class="line">    ctx.arc(<span class="number">300</span>,<span class="number">120</span>,<span class="number">20</span>,-<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="number">0</span>,<span class="literal">true</span>);</div><div class="line"><span class="comment">//因为圆弧的终点与下一条直线的起始点相同，所以此处不需要moveTo()</span></div><div class="line"><span class="comment">//    ctx.moveTo(320,120);</span></div><div class="line">    ctx.lineTo(<span class="number">320</span>,<span class="number">170</span>);</div><div class="line">    ctx.arc(<span class="number">300</span>,<span class="number">170</span>,<span class="number">20</span>,<span class="number">0</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="literal">true</span>);</div><div class="line"><span class="comment">//    ctx.moveTo(300,190);</span></div><div class="line">    ctx.lineTo(<span class="number">100</span>,<span class="number">190</span>);</div><div class="line">    ctx.arc(<span class="number">100</span>,<span class="number">170</span>,<span class="number">20</span>,<span class="built_in">Math</span>.PI/<span class="number">2</span>,<span class="built_in">Math</span>.PI,<span class="literal">true</span>);</div><div class="line"><span class="comment">//    ctx.moveTo(80,170);</span></div><div class="line">    ctx.lineTo(<span class="number">80</span>,<span class="number">120</span>);</div><div class="line">    ctx.arc(<span class="number">100</span>,<span class="number">120</span>,<span class="number">20</span>,<span class="built_in">Math</span>.PI,<span class="built_in">Math</span>.PI*<span class="number">3</span>/<span class="number">2</span>,<span class="literal">true</span>);</div><div class="line"></div><div class="line">    ctx.stroke();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>封装彩虹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Rainbow</span>(<span class="params">ctx</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.ctx = ctx;</div><div class="line">    &#125;</div><div class="line">    Rainbow.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params">width,rgbs</span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> perWidth = width/<span class="number">6</span>;</div><div class="line">        <span class="keyword">this</span>.ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)&#123;</div><div class="line">            <span class="comment">//如果不相等，则每个的进度等于后一个的值减去前一个的值除以总共变化的次数</span></div><div class="line">            <span class="keyword">var</span> r = rgbs[i+<span class="number">1</span>].r==rgbs[i].r?<span class="number">0</span>:(rgbs[i+<span class="number">1</span>].r-rgbs[i].r)/perWidth;</div><div class="line">            <span class="keyword">var</span> g = rgbs[i+<span class="number">1</span>].g==rgbs[i].g?<span class="number">0</span>:(rgbs[i+<span class="number">1</span>].g-rgbs[i].g)/perWidth;</div><div class="line">            <span class="keyword">var</span> b = rgbs[i+<span class="number">1</span>].b==rgbs[i].b?<span class="number">0</span>:(rgbs[i+<span class="number">1</span>].b-rgbs[i].b)/perWidth;</div><div class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> j=<span class="number">0</span>;j&lt;perWidth;j++)&#123;</div><div class="line">                <span class="comment">//判断每个颜色两次变化是否为0，为0则取固定的值，不为零则在原来的基础上加上每次的变化值</span></div><div class="line">                <span class="keyword">var</span> color1 = r==<span class="number">0</span>?rgbs[i].r:<span class="built_in">parseInt</span>(rgbs[i].r+r*j);</div><div class="line">                <span class="keyword">var</span> color2 = g==<span class="number">0</span>?rgbs[i].g:<span class="built_in">parseInt</span>(rgbs[i].g+g*j);</div><div class="line">                <span class="keyword">var</span> color3 = b==<span class="number">0</span>?rgbs[i].b:<span class="built_in">parseInt</span>(rgbs[i].b+b*j);</div><div class="line">                <span class="keyword">this</span>.ctx.beginPath();</div><div class="line">                <span class="keyword">this</span>.ctx.strokeStyle = <span class="string">"rgb("</span>+color1+<span class="string">","</span>+color2+<span class="string">","</span>+color3+<span class="string">")"</span>;</div><div class="line">                <span class="keyword">this</span>.ctx.moveTo(<span class="number">100</span>,perWidth*i+<span class="number">100</span>+j);</div><div class="line">                <span class="keyword">this</span>.ctx.lineTo(<span class="number">500</span>,perWidth*i+<span class="number">100</span>+j);</div><div class="line">                <span class="keyword">this</span>.ctx.stroke();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">var</span> rgbs = [&#123;<span class="comment">//红</span></div><div class="line">            r:<span class="number">255</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">0</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">0</span></div><div class="line">        &#125;,&#123;<span class="comment">//橙</span></div><div class="line">            r:<span class="number">255</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">127</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">0</span></div><div class="line">        &#125;,&#123;<span class="comment">//黄</span></div><div class="line">            r:<span class="number">255</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">255</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">0</span></div><div class="line">        &#125;,&#123;<span class="comment">//绿</span></div><div class="line">            r:<span class="number">0</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">255</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">0</span></div><div class="line">        &#125;,&#123;<span class="comment">//青</span></div><div class="line">            r:<span class="number">0</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">127</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">255</span></div><div class="line">        &#125;,&#123;<span class="comment">//蓝</span></div><div class="line">            r:<span class="number">0</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">0</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">255</span></div><div class="line">        &#125;,&#123;<span class="comment">//紫</span></div><div class="line">            r:<span class="number">139</span>,</div><div class="line">            <span class="attr">g</span>:<span class="number">0</span>,</div><div class="line">            <span class="attr">b</span>:<span class="number">255</span></div><div class="line">        &#125;];</div><div class="line">    <span class="keyword">var</span> rain = <span class="keyword">new</span> Rainbow(ctx);</div><div class="line">    rain.init(<span class="number">180</span>,rgbs);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="绘制文本"><a href="#绘制文本" class="headerlink" title="绘制文本"></a>绘制文本</h2><ul>
<li>strokeText()：空心文字</li>
<li>fillText():实心文字</li>
<li>文本的对齐方式<ul>
<li>水平对齐：textAlign –&gt;  left center right start end</li>
<li>垂直对齐：textBaseline –&gt;  top middle bottom  </li>
</ul>
</li>
<li>获取文本宽度 measureText<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="keyword">var</span> str = <span class="string">"人生如戏"</span>;</div><div class="line">    ctx.font=<span class="string">"48px microsoft yahei"</span>;</div><div class="line">    ctx.textAlign = <span class="string">"center"</span>;</div><div class="line">    ctx.textBaseline = <span class="string">"bottom"</span>;</div><div class="line">    </div><div class="line">    ctx.strokeText(str,<span class="number">100</span>,<span class="number">100</span>);<span class="comment">//空心文字</span></div><div class="line"><span class="comment">//    ctx.fillText(str,100,100);//实心文字</span></div><div class="line"><span class="comment">//在文字下方画一条和文本宽度相等的线</span></div><div class="line">	<span class="keyword">var</span> obj = ctx.measureText(str);</div><div class="line">    ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">    ctx.lineTo(<span class="number">100</span>+obj.width,<span class="number">100</span>);</div><div class="line">    ctx.stroke();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="绘制图片"><a href="#绘制图片" class="headerlink" title="绘制图片"></a>绘制图片</h2><ul>
<li>drawImage()</li>
<li><p>三个参数：图片对象   放置的位置(x,y)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">    img.src = <span class="string">"img/xiang.jpg"</span>;</div><div class="line">    <span class="comment">//必须等图片加载完毕后才能绘制图片</span></div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        ctx.drawImage(img,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">    &#125;;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="../img/da.png" alt="csc"></p>
</li>
<li><p>五个参数 ：图片对象，放置的位置(x,y),图片的大小(width,height)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">    img.src = <span class="string">"img/xiang.jpg"</span>;</div><div class="line">    <span class="comment">//必须等图片加载完毕后才能绘制图片</span></div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        ctx.drawImage(img,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">        <span class="comment">//会根据设置的参数对图片进行缩放，不会把图片裁剪</span></div><div class="line">    &#125;;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>效果图<br> <img src="../img/xiao.png" alt="csc"></p>
</li>
<li>九个参数：图片对象，图片中的坐标，要显示的图片的宽高，放置的位置，图片的大小<pre><code>* 可以用于绘制逐帧动画,需要结合setTimeout()或者requestAnimationFrame() 
</code></pre><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="keyword">var</span> img = <span class="keyword">new</span> Image();</div><div class="line">    <span class="comment">//需要准备精灵图，让图片进行切换，实现动画效果</span></div><div class="line">    img.src = <span class="string">"img/rabbit.png"</span>;</div><div class="line">    <span class="keyword">var</span> allWidth = <span class="number">160</span>;</div><div class="line">    <span class="keyword">var</span> allHeight = <span class="number">260</span>;</div><div class="line">    <span class="comment">//一共四帧</span></div><div class="line">    <span class="keyword">var</span> num = <span class="number">4</span>;</div><div class="line">    <span class="keyword">var</span> nowIndex = <span class="number">0</span>;</div><div class="line">    <span class="keyword">var</span> perHeight = allHeight/num;</div><div class="line">    <span class="keyword">var</span> perWidth = allWidth/num;</div><div class="line">    img.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        render();</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    	<span class="comment">//每次切换时先清空画布</span></div><div class="line">        ctx.clearRect(<span class="number">0</span>,<span class="number">0</span>,cas.width,cas.height);</div><div class="line">	ctx.drawImage(img,perWidth*nowIndex,<span class="number">0</span>,perWidth,perHeight,cas.width/<span class="number">2</span>-perWidth/<span class="number">2</span>,cas.height/<span class="number">2</span>-perHeight/<span class="number">2</span>,perWidth,perHeight);</div><div class="line">        nowIndex++;</div><div class="line">        <span class="keyword">if</span>(nowIndex==<span class="number">4</span>)&#123;</div><div class="line">            nowIndex=<span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        setTimeout(render,<span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="变换"><a href="#变换" class="headerlink" title="变换"></a>变换</h2><blockquote>
<p>坐标轴的变换，不影响变换之前绘制的图形，但是会影响变换之后的图形</p>
<ul>
<li>translate(x,y):将坐标原点进行位移</li>
<li>rotate(angle):以坐标原点为中心将坐标轴进行旋转（弧度）</li>
<li>scale(ratex,ratey):将图形进行缩放</li>
<li>在同一个画布中绘制一个旋转的正方形和固定的正方形<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="keyword">var</span> speed = <span class="built_in">Math</span>.PI/<span class="number">90</span>;</div><div class="line">    <span class="keyword">var</span> index = <span class="number">0</span>;</div><div class="line">    <span class="comment">//移动坐标原点至画布中心</span></div><div class="line">    ctx.translate(cas.width/<span class="number">2</span>,cas.height/<span class="number">2</span>);</div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">render</span>(<span class="params"></span>) </span>&#123;</div><div class="line">        ctx.clearRect(-cas.width/<span class="number">2</span>,-cas.height/<span class="number">2</span>,cas.width,cas.height);</div><div class="line">        ctx.strokeRect(-cas.width/<span class="number">2</span>,-cas.height/<span class="number">2</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">        ctx.save();<span class="comment">//保存的状态包括平移，旋转，缩放和基本样式设置</span></div><div class="line">        ctx.rotate(speed*index);<span class="comment">//以坐标原点为中心进行旋转</span></div><div class="line">        ctx.strokeRect(<span class="number">-50</span>,<span class="number">-50</span>,<span class="number">100</span>,<span class="number">100</span>);<span class="comment">//绘制的是旋转的矩形</span></div><div class="line">        ctx.restore();<span class="comment">//恢复固定的矩形，此时会将rotate重置为0</span></div><div class="line">   <span class="comment">//恢复状态的时候，会将重新设置绘制状态，即将rotate状态重新设置保存时的状态，即为零</span></div><div class="line">   <span class="comment">//恢复原来状态之后，旋转角度依然从零开始，所以要想达到旋转效果，必须逐渐增大角度</span></div><div class="line">        index++;</div><div class="line">        <span class="keyword">if</span>(speed*index &gt; <span class="number">2</span>*<span class="built_in">Math</span>.PI)&#123;</div><div class="line">            index = <span class="number">0</span>;</div><div class="line">        &#125;</div><div class="line">        requestAnimationFrame(render);</div><div class="line">    &#125;</div><div class="line">    render();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/10/Z01-canvas基本使用 /">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/10/Z01-canvas基本使用 /" itemprop="url">
                  canvas基本使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-10-10T00:00:00+08:00">
                2016-10-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/canvas/" itemprop="url" rel="index">
                    <span itemprop="name">canvas</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Canvas基础"><a href="#Canvas基础" class="headerlink" title="Canvas基础"></a>Canvas基础</h1><blockquote>
<p>canvas : 画布默认宽高是300x150;<br>canvas的宽高要使用canvas标签的属性设置，不能使用css设置</p>
<ul>
<li>简单画一条直线<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="built_in">console</span>.log(cas.height);</div><div class="line">    <span class="built_in">console</span>.log(cas.width);</div><div class="line">    <span class="comment">//获取画图工具</span></div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="comment">//指定画图的起点</span></div><div class="line">    ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">    <span class="comment">//画路径</span></div><div class="line">    ctx.lineTo(<span class="number">300</span>,<span class="number">100</span>);</div><div class="line">    <span class="comment">//描边</span></div><div class="line">    ctx.stroke();</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<ul>
<li>绘制矩形<blockquote>
<p><strong>非零环绕原则(填充的原则)：</strong>从闭合区域中画一条线，这条线经过的线条中，如果正向与反向的线条相互抵消，则不填充</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">   <span class="comment">//绘制正方形</span></div><div class="line">   <span class="comment">//ctx.closePath()作用是闭合路径</span></div><div class="line">   <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">   <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">   ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">   ctx.lineTo(<span class="number">300</span>,<span class="number">100</span>);</div><div class="line">   ctx.lineTo(<span class="number">300</span>,<span class="number">300</span>);</div><div class="line">   ctx.lineTo(<span class="number">100</span>,<span class="number">300</span>);</div><div class="line">   ctx.lineTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">   ctx.closePath();<span class="comment">//闭合路径</span></div><div class="line"><span class="comment">//绘制内部矩形</span></div><div class="line">   ctx.moveTo(<span class="number">150</span>,<span class="number">150</span>);</div><div class="line">   ctx.lineTo(<span class="number">150</span>,<span class="number">250</span>);</div><div class="line">   ctx.lineTo(<span class="number">250</span>,<span class="number">250</span>);</div><div class="line">   ctx.lineTo(<span class="number">250</span>,<span class="number">150</span>);</div><div class="line">   ctx.lineTo(<span class="number">150</span>,<span class="number">150</span>);</div><div class="line">   ctx.closePath();</div><div class="line">   <span class="comment">//设置线的颜色</span></div><div class="line">   ctx.strokeStyle =<span class="string">"red"</span>;</div><div class="line">   <span class="comment">//设置线的宽度</span></div><div class="line">   ctx.lineWidth = <span class="number">10</span>;</div><div class="line">   ctx.stroke();</div><div class="line">   <span class="comment">//填充</span></div><div class="line">   ctx.fill();</div><div class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</blockquote>
</li>
</ul>
<blockquote>
<p>手动闭合路径和closePath()<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="comment">//手动闭合路径和closePath()闭合路径</span></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * 如果线宽较大，会明显缺角，补上这个角需要多加一个点</div><div class="line">     *closePath()闭合路径可以省略最后一条线</div><div class="line">     */</div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.lineWidth = <span class="number">10</span>;</div><div class="line">    ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">    ctx.lineTo(<span class="number">300</span>,<span class="number">100</span>);</div><div class="line">    ctx.lineTo(<span class="number">300</span>,<span class="number">300</span>);</div><div class="line">    <span class="comment">//如果使用closePath().可以省略下面1,2两条代码</span></div><div class="line">    ctx.lineTo(<span class="number">100</span>,<span class="number">100</span>);<span class="comment">//1</span></div><div class="line">    <span class="comment">//手动闭合</span></div><div class="line">    ctx.lineTo(<span class="number">101</span>,<span class="number">100</span>);<span class="comment">//2</span></div><div class="line"><span class="comment">//    ctx.closePath();</span></div><div class="line">    ctx.stroke();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>绘制曲线<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">"600"</span> <span class="attr">height</span>=<span class="string">"400"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    <span class="comment">//绘制曲线：画一个一个的点，点的路线符合方程曲线的规律</span></div><div class="line">    ctx.moveTo(<span class="number">0</span>,<span class="number">0</span>);</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">1000</span>;i++)&#123;</div><div class="line">        <span class="keyword">var</span> x = i;</div><div class="line">        <span class="comment">//正弦曲线</span></div><div class="line">        <span class="keyword">var</span> y = <span class="number">100</span>*<span class="built_in">Math</span>.sin(x/<span class="number">50</span>)+<span class="number">100</span>;</div><div class="line">        ctx.lineTo(x,y);</div><div class="line">    &#125;</div><div class="line">    ctx.stroke();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="常用属性"><a href="#常用属性" class="headerlink" title="常用属性"></a>常用属性</h2><ul>
<li>lineWidth:线宽</li>
<li>strokeStyle：线的颜色</li>
<li>fillStyle：填充颜色</li>
<li>lineCap:线末端的类型，默认是butt，可以设置round、square</li>
<li>lineJion:相交线的拐点类型，默认是miter，可设置round，bevel</li>
<li>setLineDash():设置虚线,参数是一个数组，设置黑白切换<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"cas"</span> <span class="attr">style</span>=<span class="string">"border: 1px solid blue;"</span> <span class="attr">width</span>=<span class="string">600</span> <span class="attr">height</span>=<span class="string">400</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> cas = <span class="built_in">document</span>.getElementById(<span class="string">"cas"</span>);</div><div class="line">    <span class="keyword">var</span> ctx = cas.getContext(<span class="string">"2d"</span>);</div><div class="line">    ctx.lineWidth = <span class="number">50</span>;</div><div class="line">    ctx.moveTo(<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">    ctx.lineTo(<span class="number">400</span>,<span class="number">100</span>);</div><div class="line">    ctx.setLineDash([<span class="number">10</span>,<span class="number">15</span>,<span class="number">20</span>]);</div><div class="line">    ctx.stroke();</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/02/G01-git使用/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/02/G01-git使用/" itemprop="url">
                  GIT
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-07-02T00:00:00+08:00">
                2016-07-02
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="git"><a href="#git" class="headerlink" title="git"></a>git</h1><h2 id="操作计算机的方式"><a href="#操作计算机的方式" class="headerlink" title="操作计算机的方式"></a>操作计算机的方式</h2><ul>
<li>1、图形用户界面</li>
<li>2、命令行<ul>
<li>winows  dos</li>
<li>linux(unix mac)  shell</li>
<li>dos和shell都有两层含义：解析器  编程脚本<h2 id="常用的shell命令"><a href="#常用的shell命令" class="headerlink" title="常用的shell命令"></a>常用的shell命令</h2></li>
</ul>
</li>
<li><strong>命令的格式：<code>命令 [可选选项][参数]</code></strong></li>
<li>1、pwd(print working directory) : 打印当前目录</li>
<li>2、mkdir(make directory) : 创建目录<ul>
<li>mkdir www</li>
</ul>
</li>
<li>3、ls(list) : 显示目录</li>
<li>4、ll : 按行显示目录<ul>
<li>ll -a : 可以显示隐藏文件 </li>
<li>相当于ls -l</li>
</ul>
</li>
<li>5、 cd(change dirctory) : 切换目录</li>
<li>6、 cat : 查看文件内容</li>
<li>7、less : 查看文件，整屏显示，按q退出</li>
<li>8、tail : 监控文件<ul>
<li>tail -f a.txt 监控文件的实时变化</li>
</ul>
</li>
<li>9、echo : 向文件写入内容<ul>
<li>echo 123 &gt; a.txt : 覆盖文件内容</li>
<li>echo 456 &gt;&gt; a.txt : 向文件中追加内容 </li>
</ul>
</li>
<li>10、touch : 创建文件<ul>
<li>touch a.txt</li>
</ul>
</li>
<li>11、 rm : 删除文件</li>
<li>12、rmdir : 删除文件夹，只能删除空文件夹</li>
<li>13、mv : 移动文件<ul>
<li>mv ./www/a.txt ./  将a.txt移动到当前路径 </li>
</ul>
</li>
<li>14、cp : 复制文件</li>
<li>15、| : 管道符 ，将上一个命令的输出作为下一个命令的输入</li>
<li>16、grep : 匹配内容，一般结合管道符使用<ul>
<li>ls | grep a  : 将ls输出的文件作为输入 用来匹配带a的文件或文件夹 <h2 id="VI-编辑器"><a href="#VI-编辑器" class="headerlink" title="VI 编辑器"></a>VI 编辑器</h2></li>
</ul>
</li>
<li>三种模式：命令模式，输入模式，底行模式</li>
<li>每种模式都有各自的命令<ul>
<li>用户输入 vi +文件，进入命令行模式，此时不允许输入。命令模式下输入ZZ可直接保存退出</li>
<li>按下a或者i，进入输入模式。</li>
<li>按下ESC退出输入模式，进入命令行模式</li>
<li>按下shift+ : 进入底行模式</li>
<li>输入wq，保存并退出vi</li>
</ul>
</li>
<li>关于vi编辑器的补充<ul>
<li>快速定位到行首： 命令模式  两次g；底行模式 输入0；</li>
<li>快速定位到行尾：底行模式  输入$</li>
</ul>
</li>
<li>使用vi搜索内容：先输入左斜杠，然后输入关键字  回车</li>
<li>输入vi + 不存在的文件，会打开一个新文件，在保存后会创建一个新的文件<h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2></li>
<li>一种网络协议，用来实现两台计算机之间的通信（具体就是实现远程加密登录）</li>
<li>Telnet  是一种不加密的通信协议</li>
<li>在本地创建公钥和私钥命令：Keygen -t rsd(一种非对称加密的算法)<h3 id="两种加密方式"><a href="#两种加密方式" class="headerlink" title="两种加密方式"></a>两种加密方式</h3></li>
<li>1、对称加密（加密和解密的方式相同）</li>
<li>2、非对称加密（公钥加密，私钥解密；私钥加密，公钥解密）<ul>
<li>公钥</li>
<li>私钥<h3 id="两种登录方式"><a href="#两种登录方式" class="headerlink" title="两种登录方式"></a>两种登录方式</h3></li>
</ul>
</li>
<li><strong>使用密码登录</strong><ul>
<li>1、客户端发送请求</li>
<li>2、服务器接收到请求之后把服务器的公钥发送给客户端</li>
<li>3、客户端收到公钥后会存储在指定目录（c:\users\用户名.ssh）</li>
<li>4、客户端再次发送登录请求（密码使用公钥加密）</li>
<li>5、服务器接收到密文后，使用私钥进行解密验证是否正确</li>
</ul>
</li>
<li><strong>使用公钥和私钥登录</strong><ul>
<li>1、客户端首先生成自己的公钥和私钥（keygen -t rsa）</li>
<li>2、把客户端的公钥传递给服务器，服务器使用该公钥给客户端授权</li>
<li>3、客户端直接可以免密码登录<h2 id="GIT基础"><a href="#GIT基础" class="headerlink" title="GIT基础"></a>GIT基础</h2></li>
</ul>
</li>
<li><strong>git 工作流程</strong><ul>
<li>1、下载代码，在下载的代码基础之上做开发，然后提交</li>
<li>2、新建项目，git init生成一个仓库，在仓库中添加代码，推送到服务器的空仓库中<h3 id="git中三个重要的区域"><a href="#git中三个重要的区域" class="headerlink" title="git中三个重要的区域"></a>git中三个重要的区域</h3></li>
</ul>
</li>
<li>1、工作目录</li>
<li>2、暂存区</li>
<li>3、本地仓库<h3 id="git文件的四种状态"><a href="#git文件的四种状态" class="headerlink" title="git文件的四种状态"></a>git文件的四种状态</h3></li>
<li>1、未跟踪(untracked)：工作目录刚创建的文件</li>
<li>2、已暂存(staged)：从工作目录提交到暂存区的文件</li>
<li>3、已提交(commited)：从暂存区提交到本地仓库的文件</li>
<li>4、 已修改(modified)：暂存区修改过的文件<h3 id="git命令的使用"><a href="#git命令的使用" class="headerlink" title="git命令的使用"></a>git命令的使用</h3></li>
<li>git init  ：初始化一个本地仓库，设置在客户端</li>
<li>git init –bare ：初始化一个共享仓库，设置在服务器上</li>
<li>git config –global user.name “名字” ： 设置用户名</li>
<li>git config –global user.email 邮箱  ：设置邮箱</li>
<li>git status ：查看文件状态</li>
<li>git add 文件(多个文件之间以空格隔开) ：将工作目录的文件提交至暂存区  <strong>未跟踪–&gt;已暂存</strong></li>
<li>git rm –cached 文件 ： 重新把暂存区中的文件放回工作目录   <strong>已暂存–&gt;未跟踪</strong></li>
<li>git add -A /<code>git add  *</code> ：表示全部提交  <strong>已暂存–&gt;已提交</strong></li>
<li>git commit  -m  ‘描述’ ：把暂存区中的内容<strong>提交到本地仓库</strong></li>
<li>git log ： 查看提交的本地仓库记录</li>
<li>git checkout  – 文件 ： 取消暂存区文件的修改内容。git checkout .  :  取消全部修改内容</li>
<li>git reset –hard commitID ：用本地仓库中的快照覆盖工作目录和暂存区中的内容，并且放弃commitID之后的提交</li>
<li>git reset HEAD  :  使用本地仓库的最新版本覆盖暂存区，但是不覆盖工作目录</li>
<li>git reset –hard HEAD   : 工作目录和暂存区和本地仓库都会变化</li>
<li>git reset–soft  HEAD : 只会回滚本地仓库，工作目录和暂存区不会改变</li>
<li>git reset –mixed HEAD :  默认。用本地仓库的版本覆盖暂存区，也会回滚本地仓库<h3 id="分支操作"><a href="#分支操作" class="headerlink" title="分支操作"></a>分支操作</h3></li>
<li>git branch ： 查看分支</li>
<li>git branch -r  ： 查看远程分支</li>
<li>git branch -a  ： 查看所有分支</li>
<li>git branch 分支名称 ：创建分支</li>
<li>git checkout 分支名称 ：切换分支</li>
<li>git checkout -b 分支名称 ：创建并且切换分支</li>
<li>git branch -d 分支名称 ：删除分支</li>
<li>git merge  被合并的分支名称 ：合并分支</li>
<li>git push origin –delete  分支名称：删除远程分支</li>
<li>git push origin+ 空格 +:分支名称：删除远程分支<h3 id="远程命令"><a href="#远程命令" class="headerlink" title="远程命令"></a>远程命令</h3></li>
<li>将代码推送至远程仓库<ul>
<li>git push 远程仓库的地址  本地分支：远程分支(可省，默认为本地分支名称)</li>
<li>git push 远程仓库的地址  本地分支</li>
</ul>
</li>
<li>从远程仓库拉代码<ul>
<li>git pull 远程仓库的地址  远程分支：本地分支（可省，默认为远程分支名称）</li>
<li>git pull 远程仓库的地址  远程分支</li>
</ul>
</li>
<li>git clone 远程仓库的地址  文件名称（可选，如果缺省，则使用远程仓库的名称）<ul>
<li>会自动在远程分支和本地分支之间建立一个关联</li>
<li>git clone 的项目，会自动建立名为origin的远程仓库地址的别名</li>
<li>可以使用git push origin 本地分支 可以直接推送至远程仓库</li>
<li>git clone 会自动跟踪远程分支（可以直接使用git pull进行代码更新）</li>
<li>如果git pull 拉下来的代码希望建立跟踪分支，需要执行git branch –set-upstream-to=origin/master master </li>
</ul>
</li>
<li>git remote add origin(别名) root@IP地址：创建一个远程仓库的别名</li>
<li>git remote  ： 查看远程主机的别名</li>
<li>git remote show origin　 ： 查看远程仓库别名的具体地址</li>
<li>git fetch ： 获取远程代码，但不会合并；可以使用git merge  origin/分支   命令进行代码合并</li>
<li>git stash : 保存当前的版本状态，即没有做完的工作，还没有执行commit</li>
<li>git stash pop : 恢复保存的内容，继续进行</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/05/G03-requirejs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/05/G03-requirejs/" itemprop="url">
                  requireJS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-05T00:00:00+08:00">
                2016-06-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AMD和CMD/" itemprop="url" rel="index">
                    <span itemprop="name">AMD和CMD</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="requireJs"><a href="#requireJs" class="headerlink" title="requireJs"></a>requireJs</h1><p><strong> AMD（  Asynchronous Module Definition）异步加载模块定义</strong></p>
<ul>
<li>当一个网页要引入多个外部文件，且文件之间的依赖关系较强的时候，必须保证文件的加载顺序，并且当浏览器加载外部文件的时候就会停止网页的渲染，加载的文件越多，网页失去响应的时间越长，代码的编写和维护也会很麻烦。</li>
<li>requirejs实现了js 文件的异步加载，避免网页失去响应</li>
<li>管理模块之间的依赖性，便于代码的编写和维护</li>
<li>解决了命名冲突问题（不同模块中的同名变量不会有冲突）<h2 id="requirejs的基本使用"><a href="#requirejs的基本使用" class="headerlink" title="requirejs的基本使用"></a>requirejs的基本使用</h2><strong>注意 : </strong></li>
<li>必须注意各模块之间的路径问题<h3 id="主模块"><a href="#主模块" class="headerlink" title="主模块"></a>主模块</h3></li>
<li>如果主模块不依赖于任何模块，其中的js代码可以正常编写​<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--  data-main的作用是指定网页程序的主模板，即main.js。这个文件会第一个被require.js加载。main是省略了后缀名js --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"require.js"</span> <span class="attr">data-main</span>=<span class="string">"js/main"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//main.js</span></div><div class="line"><span class="built_in">console</span>.log(<span class="string">"abc"</span>);</div></pre></td></tr></table></figure>
<ul>
<li>当主模块依赖于其他模块时，需要使用require函数<ul>
<li>第一个参数[“module1”,”module2”,”module3”]代表的是该模块所依赖的三个模块，第二个参数是回调函数，当前面的模块加载完毕后，会调用该函数，加载的模块会以参数的形式依次传入该回调函数，就可以在回调函数内使用这些模块</li>
<li>可以直接使用require([“module”]),表示在当前文件中加载模块<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>([<span class="string">"module1"</span>,<span class="string">"module2"</span>,<span class="string">"module3"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">m1,m2,m3</span>)</span>&#123;</div><div class="line">  	<span class="built_in">console</span>.log(m1);</div><div class="line">  	<span class="built_in">console</span>.log(m2);</div><div class="line">  	<span class="built_in">console</span>.log(m3);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="自定义模块加载-require-config"><a href="#自定义模块加载-require-config" class="headerlink" title="自定义模块加载 require.config()"></a>自定义模块加载 require.config()</h3><ul>
<li>baseUrl: 显示的设置模块查找的根路径，即paths中设置的文件路径从public/js/开始<ul>
<li>如果不设置baseUrl时，根路径默认为data-main属性设置的入口文件所在的路径</li>
</ul>
</li>
<li>paths: 指定各个模块的加载路径，并为其路径设置一个名字 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">  <span class="attr">baseUrl</span>:<span class="string">"public/js"</span>,</div><div class="line">  <span class="attr">paths</span>:&#123;</div><div class="line">    <span class="attr">jquery</span>:<span class="string">"jquery/jquery.min"</span>,</div><div class="line">    <span class="attr">echarts</span>:<span class="string">"echarts/echarts.min"</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="定义模块"><a href="#定义模块" class="headerlink" title="定义模块"></a>定义模块</h3><ul>
<li>使用define();<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//这是一个js文件：sum.js</span></div><div class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a,b</span>)</span>&#123;</div><div class="line">    <span class="keyword">return</span> a+b;</div><div class="line">  &#125; </div><div class="line">  <span class="keyword">return</span> &#123;</div><div class="line">    <span class="attr">sum</span>:sum</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>main函数加载时用法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//main.js</span></div><div class="line"><span class="built_in">require</span>([<span class="string">"sum"</span>],<span class="function"><span class="keyword">function</span>(<span class="params">obj</span>)</span>&#123;</div><div class="line">  <span class="keyword">var</span> sum = obj.sum(<span class="number">1</span>,<span class="number">2</span>);</div><div class="line">  <span class="built_in">console</span>.log(sum);<span class="comment">//3</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="非规范的模块处理"><a href="#非规范的模块处理" class="headerlink" title="非规范的模块处理"></a>非规范的模块处理</h3><ul>
<li>使用require.config()设置<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  js/foo.js</span></div><div class="line"><span class="comment">//非规范的模块,即没有使用define定义模块</span></div><div class="line"><span class="keyword">var</span> n = <span class="number">3</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(n);  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>处理方式<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//  main.js</span></div><div class="line"><span class="built_in">require</span>.config(&#123;</div><div class="line">  <span class="attr">shim</span>:&#123;</div><div class="line">  </div><div class="line">  	<span class="comment">// 找到模块</span></div><div class="line">    <span class="string">"js/foo"</span>:&#123;</div><div class="line">    </div><div class="line">    	<span class="comment">// 设置该模块所依赖的模块</span></div><div class="line">    	deps:[<span class="string">"jquery"</span>,<span class="string">"common"</span>],</div><div class="line">    	<span class="comment">//导出非规范模块中的成员(无论是变量还是函数)，此处是定义的fn函数</span></div><div class="line">      	exports:<span class="string">"fn"</span></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="CMD"><a href="#CMD" class="headerlink" title="CMD"></a>CMD</h1><p><strong> Sea.js 中，所有 JavaScript 模块都遵循 CMD（Common Module Definition） 模块定义规范。</strong>     </p>
<ul>
<li>在CMD规范中，一个模块就是一个文件<h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2></li>
<li>denfine() ： 定义模块，是一个全局函数  define(factory)</li>
<li>接收factory参数，可以是函数，对象，也可以是字符串。</li>
<li>define()也可以接收三个参数。define(id,deps,factory)<ul>
<li>id : 模块名称</li>
<li>deps : 模块依赖</li>
<li>factory : 模块的构造方法，处理模块代码 </li>
</ul>
</li>
<li>当factory为函数时，接收三个参数<ul>
<li>require: 是一个函数，接收一个参数，为模块名称，用来获取其他模块提供的接口<ul>
<li>若要异步加载模块 : require.async(id, [callback:可选])</li>
</ul>
</li>
<li>exports : 是一个对象，用来提供对外的模块接口。</li>
<li>module :　是一个对象，存储着与当前模块相关的一些属性和方法<ul>
<li>module.url: 根据模块系统的路径解析规则得到的模块绝对路径。 </li>
<li>一般情况下（没有在 define 中写 id 参数时），module.id 的值就是 module.uri，两者完全相同。</li>
<li>module.dependencies : 是一个数组，表示当前模块的依赖</li>
<li>module.exports : exports 是对该对象的一个引用。如果module.exports的指向改变了，那么exports就不在等于module.exports<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</div><div class="line">  <span class="comment">// 模块代码</span></div><div class="line">  <span class="built_in">require</span>(<span class="string">"./model"</span>);</div><div class="line">  exports.foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  &#125;</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.exports==exports);<span class="comment">//true</span></div><div class="line">  <span class="built_in">module</span>.exports = <span class="keyword">new</span> Person();</div><div class="line">  <span class="built_in">console</span>.log(<span class="built_in">module</span>.exports==exports);<span class="comment">//false</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/06/03/G02-cookie和session/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/03/G02-cookie和session/" itemprop="url">
                  cookie
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-06-03T00:00:00+08:00">
                2016-06-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/cookie和session/" itemprop="url" rel="index">
                    <span itemprop="name">cookie和session</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="cookie和session"><a href="#cookie和session" class="headerlink" title="cookie和session"></a>cookie和session</h1><ul>
<li>http是无状态的，无法记录客户端和服务器端的通信状态</li>
<li>url重写可以解决用户禁用cookie后，依然保持客户端与服务器端的正常通信状态。</li>
<li>由于 Http 协议的请求过程，是基于TCP/IP的，当客户端请求服务器，服务器处理后，进行响应，这个过程是无状态的。在有些时候，是需要保存一些客户端的请求信息，识别客户端的某些状态，智能的、有针对性的去分析某些客户端的习惯。这些时候，就需要去记录客户端的连接状态，识别请求的状态等。</li>
<li>cookie可以在客户端存储数据</li>
<li>在子路径设置的cookie在父路径下是获取不到的，反之则可；</li>
<li>不可以跨域获取cookie<h2 id="操作cookie"><a href="#操作cookie" class="headerlink" title="操作cookie"></a>操作cookie</h2></li>
<li>document.cookie   可以访问cookie</li>
<li>cookie的格式是键值对</li>
<li>多个cookie之间使用分号和空格隔开 ，如 <code>username=zhangsan; age=12</code><h3 id="cookie分类"><a href="#cookie分类" class="headerlink" title="cookie分类"></a>cookie分类</h3></li>
<li>session cookie   会话cookie  关闭浏览器窗口，cookie就消失</li>
<li>presistant cookie   持久cookie  需要设置过期时间<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> date = <span class="keyword">new</span> <span class="built_in">Date</span>();</div><div class="line">date.setDate(data.getDate()+<span class="number">5</span>);</div><div class="line"><span class="comment">//设置为从当前时间起五天后过期</span></div><div class="line"><span class="built_in">document</span>.cookie = <span class="string">"age=12;expires="</span>+date.toGMTString();</div><div class="line"><span class="built_in">document</span>.cookie=<span class="string">"username=zhangsan"</span>;<span class="comment">//设置多个cookie，cookie设置是累加的</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><strong> 封装cookie</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">   <span class="comment">//设置cookie</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">setCookie</span>(<span class="params">key,value,expires</span>) </span>&#123;</div><div class="line">       <span class="built_in">document</span>.cookie = key + <span class="string">"="</span> + value + <span class="string">"; "</span> +<span class="string">"expires="</span>+expires + 	<span class="string">"; path=/"</span>;   <span class="comment">//   path=/  表示在当前的根目录有效</span></div><div class="line">   &#125;</div><div class="line">   <span class="comment">//获取cookie</span></div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">getCookie</span>(<span class="params">cname</span>) </span>&#123;</div><div class="line">       <span class="keyword">var</span> cookies = <span class="built_in">document</span>.cookie;</div><div class="line">       <span class="keyword">var</span> arr = cookies.split(<span class="string">"; "</span>);</div><div class="line">       <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</div><div class="line">           <span class="keyword">var</span> kv = arr[i].split(<span class="string">"="</span>);</div><div class="line">           <span class="keyword">if</span>(cname ==kv[<span class="number">0</span>])&#123;</div><div class="line">               <span class="keyword">return</span> kv[<span class="number">1</span>];</div><div class="line">           &#125;</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure></p>
<h3 id="URL重写"><a href="#URL重写" class="headerlink" title="URL重写"></a>URL重写</h3><ul>
<li>该工作在服务器端进行</li>
<li>解决用户禁用cookie的情况下依然可以保存客户端和服务器的通信状态</li>
<li>URL 重写是拦截客户端传入 Web 请求URL并自动将其定向到到规则指定的 URL 的过程。比如浏览器发来请求 <code>http://blog.mocoder.com/hello.html</code>，服务器自动将这个请求中定向为<code>http://blog.mocoder.com/test.do?method=hello</code>。</li>
<li><strong> jquery 插件操作cookie</strong>   使用jquery.cookie.js<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2></li>
<li>当程序需要为某个客户端的请求创建一个session时，服务器首先检查这个客户端的请求里是否已包含了一个session标识（称为session id），如果已包含则说明以前已经为此客户端创建过session，服务器就按照session id把这个session检索出来使用（检索不到，会新建一个），如果客户端请求不包含session id，则为此客户端创建一个session并且生成一个与此session相关联的session id，session id的值应该是一个既不会重复，又不容易被找到规律的字符串，这个session id将被在本次响应中返回给客户端保存,交给cookie保存，这样在交互过程中浏览器可以自动的按照规则把这个标识发送给服务器。一般这个cookie的名字都是类似于SESSIONID。<h2 id="cookie-和-session的区别"><a href="#cookie-和-session的区别" class="headerlink" title="cookie 和 session的区别"></a>cookie 和 session的区别</h2></li>
<li>cookie数据存放在客户端，session数据存放在服务器上</li>
<li>cookie数据不安全,可以被别人获取，session则相对安全。</li>
<li>session数据会在一定的时间内保存在服务器上，默认是30min。当访问量增多的时候，会比较消耗服务器的性能</li>
<li>单个cookie保存的数据不能超过4K<h2 id="前端可以发送请求方式"><a href="#前端可以发送请求方式" class="headerlink" title="前端可以发送请求方式"></a>前端可以发送请求方式</h2></li>
<li>1、地址栏直接输入url</li>
<li>2、表单的action属性</li>
<li>3、a标签href</li>
<li>4、img的src</li>
<li>5、script的src</li>
<li>6、link的href</li>
<li>7、iframe 的src</li>
<li>8、ajax</li>
<li>9、postMessage  H5新的API</li>
<li>10、flash插件</li>
<li>11、location.href</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/25/F05-面向对象-杂乱知识点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/25/F05-面向对象-杂乱知识点/" itemprop="url">
                  面向对象-杂乱知识点
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-25T00:00:00+08:00">
                2016-05-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="杂乱知识梳理"><a href="#杂乱知识梳理" class="headerlink" title="杂乱知识梳理"></a>杂乱知识梳理</h1><h2 id="对象的体系结构"><a href="#对象的体系结构" class="headerlink" title="对象的体系结构"></a>对象的体系结构</h2><ul>
<li><ol>
<li>所有的实例对象都有一个<code>__proto__</code>属性，该属性指向产生该实例对象的构造函数的原型</li>
</ol>
</li>
<li><ol>
<li>所有的构造函数都有一个prototype属性，该属性本质上也是一个对象</li>
</ol>
</li>
<li><ol>
<li>所有的默认的原型对象都有一个contructor属性，该属性指向原型所属的构造函数</li>
</ol>
</li>
<li><ol>
<li>原型对象中有一个<code>__proto__</code>属性，该属性指向Object.prototype(Object的原型中没有<code>__proto__</code>,因为这里是原型链的终点)</li>
</ol>
</li>
<li><ol>
<li>所有的函数都是Function的实例对象</li>
</ol>
</li>
<li>6 .  Function本身也是Function的实例对象，所以<code>Function.__proto__===Function.prototype</code>;<h2 id="数组和类数组"><a href="#数组和类数组" class="headerlink" title="数组和类数组"></a>数组和类数组</h2></li>
<li>delete : 删除对象的属性<ul>
<li>全局作用域中var声明的变量，delete无法删除</li>
<li>不使用var声明的全局变量，可以使用delete删除<h3 id="类数组"><a href="#类数组" class="headerlink" title="类数组"></a>类数组</h3></li>
</ul>
</li>
<li>jquery对象本质上是类数组</li>
<li><p>类数组的属性是数值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line">  <span class="number">0</span>:<span class="string">"aaa"</span>,</div><div class="line">  <span class="number">1</span>:<span class="string">"bbb"</span>,</div><div class="line">  <span class="number">2</span>:<span class="string">"ccc"</span>,</div><div class="line">  <span class="attr">length</span>:<span class="number">3</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>将类数组转化成数组</p>
<ul>
<li>使用数组的slice方法</li>
<li>使用数组的push方法<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;</div><div class="line"><span class="number">0</span>:<span class="string">"aaa"</span>,</div><div class="line"><span class="number">1</span>:<span class="string">"bbb"</span>,</div><div class="line"><span class="number">2</span>:<span class="string">"ccc"</span>,</div><div class="line"><span class="comment">//必须保证length属性的值为数字属性的长度</span></div><div class="line"><span class="comment">// 转化成数组的时候会截取length长度的属性个数为数组</span></div><div class="line">length:<span class="number">3</span></div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line"><span class="comment">//var arr = [].slice.call(obj,0);</span></div><div class="line"><span class="comment">//还可以使用push</span></div><div class="line">[].push.apply(arr,obj);<span class="comment">//arr["aaa","bbb","ccc"];</span></div><div class="line"><span class="comment">//如果length的值为2，则arr["aaa","bbb"]</span></div><div class="line"><span class="built_in">console</span>.log(arr);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>call和apply的用法</strong></p>
</li>
<li>调用函数</li>
<li>改变所调用函数内部的this指向</li>
<li>转化类数组</li>
<li>借用其他对象的方法(本质上也是改变this的指向)<h2 id="对象类型检测"><a href="#对象类型检测" class="headerlink" title="对象类型检测"></a>对象类型检测</h2></li>
<li>运算符typeof  只能检测基本数据类型和object和function</li>
<li><code>Object.prototype.toString.call({})</code>可以检测出是哪一个对象</li>
<li><code>[]、/\d/</code>等直接调用<code>toString()</code>方法时，会打印字面量，因为这些对象内部对<code>toString()</code>方法进行封装，覆盖了<code>Object</code>原来的。直接调用<code>Object</code>中的<code>toString()</code>方法，会打印<code>[object Object]</code>这种形式的字符串<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> ret1 = <span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;);<span class="comment">//[object Object]</span></div><div class="line"><span class="keyword">var</span> ret2 = <span class="built_in">Object</span>.prototype.toString.call([]);<span class="comment">//[object Array]</span></div><div class="line"><span class="keyword">var</span> ret3 = <span class="built_in">Object</span>.prototype.toString.call(<span class="regexp">/\d/</span>);<span class="comment">//[object RegExp]</span></div><div class="line"><span class="keyword">var</span> ret4 = <span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">String</span>());<span class="comment">//[object String]</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="对象属性"><a href="#对象属性" class="headerlink" title="对象属性"></a>对象属性</h2><ul>
<li><p>Object.definePrototype(obj,attr,{})</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"info"</span>,&#123;</div><div class="line">	<span class="attr">value</span>:<span class="string">"111"</span>,<span class="comment">//属性默认值</span></div><div class="line">	writable:<span class="literal">true</span>,<span class="comment">//控制是否可写</span></div><div class="line">	configurable:<span class="literal">true</span>,<span class="comment">//控制属性是否可删除</span></div><div class="line">	enumerable:<span class="literal">true</span><span class="comment">//是否可以通过for in访问到</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
<li><p>get 和 set</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">"info"</span>,&#123;</div><div class="line"><span class="comment">//读取属性的时候调用get</span></div><div class="line">	get:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.value;</div><div class="line">	&#125;,</div><div class="line">	<span class="comment">//设置属性的时候调用set，参数即为设置的值，</span></div><div class="line">	set:<span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</div><div class="line">		<span class="keyword">this</span>.value  =value;</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><ul>
<li>“use strict”;ES5的新特性。严格模式对js代码结构有更严格的要求</li>
<li>普通函数中this指向window，严格模式下this指向undefined</li>
</ul>
<h2 id="对象实例判断"><a href="#对象实例判断" class="headerlink" title="对象实例判断"></a>对象实例判断</h2><ul>
<li>实例产生之后再修改构造函数的原型，那么对实例中的数据是没有影响的，但是会影响instanceof的判断，只有<code>实例对象.__proto__==构造函数.prototype</code>成立时才为true<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"> <span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"> Foo.prototype.flag = <span class="number">123</span>;</div><div class="line"> <span class="keyword">var</span> f = <span class="keyword">new</span> fn();</div><div class="line"> <span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();</div><div class="line"> Foo.prototype = f;</div><div class="line"> <span class="built_in">console</span>.log(foo <span class="keyword">instanceof</span> Foo);<span class="comment">//false</span></div><div class="line"> <span class="built_in">console</span>.log(foo.__proto__ === Foo.prototype);<span class="comment">//false</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="拖拽案例"><a href="#拖拽案例" class="headerlink" title="拖拽案例"></a>拖拽案例</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">    *&#123;</div><div class="line">        margin: 0;</div><div class="line">        padding: 0;</div><div class="line">    &#125;</div><div class="line">    .drag&#123;</div><div class="line">        width: 200px;</div><div class="line">        height:200px;</div><div class="line">        background: darkorange;</div><div class="line">        position: absolute;</div><div class="line">        left:100px;</div><div class="line">        top:100px;</div><div class="line">    &#125;</div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"drag"</span> <span class="attr">class</span>=<span class="string">"drag"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Drag</span>(<span class="params">id</span>) </span>&#123;</div><div class="line">        <span class="keyword">this</span>.target = <span class="built_in">document</span>.getElementById(id);</div><div class="line">        <span class="keyword">this</span>.disX = <span class="number">0</span>;</div><div class="line">        <span class="keyword">this</span>.disY = <span class="number">0</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">//初始化</span></div><div class="line">    Drag.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">        <span class="keyword">this</span>.target.onmousedown = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">            e = e||<span class="built_in">window</span>.event;</div><div class="line">            that.mousedownHandler(e);</div><div class="line">            <span class="built_in">document</span>.onmousemove = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">                e = e||<span class="built_in">window</span>.event;</div><div class="line">                that.mousemoveHandler(e);</div><div class="line">            &#125;;</div><div class="line">            <span class="built_in">document</span>.onmouseup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">                that.mouseupHandler();</div><div class="line">            &#125;</div><div class="line">            <span class="comment">//阻止默认行为：阻止文字默认的可拖拽效果</span></div><div class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">        &#125;;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//鼠标按下事件处理</span></div><div class="line">    Drag.prototype.mousedownHandler = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="comment">//计算鼠标距离div边界的距离</span></div><div class="line">        <span class="keyword">this</span>.disX = e.clientX-<span class="keyword">this</span>.target.offsetLeft;</div><div class="line">        <span class="keyword">this</span>.disY = e.clientY-<span class="keyword">this</span>.target.offsetTop;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//鼠标移动事件处理</span></div><div class="line">    Drag.prototype.mousemoveHandler = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</div><div class="line">        <span class="comment">//设置div移动时不超出屏幕</span></div><div class="line">        <span class="keyword">var</span> limitX = e.clientX-<span class="keyword">this</span>.disX;</div><div class="line">        <span class="keyword">var</span> limitY = e.clientY-<span class="keyword">this</span>.disY</div><div class="line">        limitX = limitX&lt;=<span class="number">0</span>?<span class="number">0</span>:limitX;</div><div class="line">        limitX = limitX&gt;=(<span class="built_in">document</span>.documentElement.clientWidth-<span class="keyword">this</span>.target.offsetWidth)?(<span class="built_in">document</span>.documentElement.clientWidth-<span class="keyword">this</span>.target.offsetWidth):limitX;</div><div class="line">        limitY =  limitY&lt;=<span class="number">0</span>?<span class="number">0</span>:limitY;</div><div class="line">        limitY = limitY&gt;=(<span class="built_in">document</span>.documentElement.clientHeight-<span class="keyword">this</span>.target.offsetHeight)?(<span class="built_in">document</span>.documentElement.clientHeight-<span class="keyword">this</span>.target.offsetHeight):limitY;</div><div class="line">        <span class="comment">//设置鼠标移动时div的位置</span></div><div class="line">        <span class="keyword">this</span>.target.style.left = limitX+ <span class="string">"px"</span>;</div><div class="line">        <span class="keyword">this</span>.target.style.top = limitY + <span class="string">"px"</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="comment">//鼠标抬起事件处理</span></div><div class="line">    Drag.prototype.mouseupHandler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="built_in">document</span>.onmousemove  = <span class="literal">null</span>;</div><div class="line">        <span class="built_in">document</span>.onmouseup = <span class="literal">null</span>;</div><div class="line">    &#125;;</div><div class="line">    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        <span class="keyword">var</span> drag = <span class="keyword">new</span> Drag(<span class="string">"drag"</span>);</div><div class="line">        drag.init();</div><div class="line">    &#125;;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h2><ul>
<li><p>第一题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = &#123;<span class="attr">n</span>:<span class="number">1</span>&#125;;</div><div class="line"><span class="keyword">var</span> b = a;</div><div class="line">a.x = a = &#123;<span class="attr">n</span>:<span class="number">2</span>&#125;;</div><div class="line"><span class="comment">// .的优先级最高，会先给x属性分配一块内存地址，a = &#123;n:2&#125;改变了a的指向，最后将&#123;n:2&#125;赋给了属性x所在的内存地址</span></div><div class="line"><span class="built_in">console</span>.log(a.x);<span class="comment">//undefined</span></div><div class="line"><span class="built_in">console</span>.log(b.x);<span class="comment">//&#123;n:2&#125;</span></div></pre></td></tr></table></figure>
</li>
<li><p>第二题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = &#123;<span class="attr">name</span>:<span class="string">'zhangsan'</span>&#125;; </div><div class="line"><span class="keyword">var</span> b = &#123;<span class="attr">age</span> : <span class="number">26</span>&#125;; </div><div class="line"><span class="keyword">var</span> arr = []; </div><div class="line">arr[a] = <span class="number">123</span>; </div><div class="line">arr[b] = <span class="number">456</span>; </div><div class="line"><span class="built_in">console</span>.log(arr.length);<span class="comment">//0  添加的是属性不是索引</span></div><div class="line"><span class="built_in">console</span>.dir(arr);</div><div class="line"><span class="comment">//arr 中只有一个属性，在为arr添加属性的时候，会调用toString()方法，将变量a进行转化，进行转化后为[object Object],所以arr只有一个属性，值为456，覆盖了123</span></div></pre></td></tr></table></figure></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/23/F04-事件处理机制/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/23/F04-事件处理机制/" itemprop="url">
                  事件处理机制
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-23T00:00:00+08:00">
                2016-05-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="事件处理机制"><a href="#事件处理机制" class="headerlink" title="事件处理机制"></a>事件处理机制</h1><ul>
<li>JavaScript是单线程的</li>
<li>浏览器本身是多线程的<ul>
<li>页面标签的渲染</li>
<li>网络通信</li>
<li>解析js运行<h2 id="事件队列（任务队列）"><a href="#事件队列（任务队列）" class="headerlink" title="事件队列（任务队列）"></a>事件队列（任务队列）</h2></li>
</ul>
</li>
<li>JavaScript的单线程决定了事件的执行需要排队，前一个任务执行完毕，才会执行后一个任务</li>
<li>能够进事件队列的函数<ul>
<li>定时函数(setTimeout,setInterval)</li>
<li>事件函数</li>
<li>ajax的回调函数，即onreadystatechange指向的函数<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">console</span>.log(<span class="number">111</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</div><div class="line"><span class="comment">//遇到setTimeout会先将要执行的函数放进事件队列中，继续执行主线程，当主线程执行完毕后，才执行事件队列中的函数,因此，定时器中的函数只能在最后执行</span></div><div class="line">  setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(i);</div><div class="line">  &#125;,<span class="number">0</span>);<span class="comment">//0 代表按照浏览器的默认最小延时执行代码</span></div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(<span class="number">222</span>);</div><div class="line"><span class="comment">//以下为输出结果</span></div><div class="line"><span class="comment">//111</span></div><div class="line"><span class="comment">//222</span></div><div class="line"><span class="comment">//3</span></div><div class="line"><span class="comment">//3</span></div><div class="line"><span class="comment">//3</span></div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="事件轮询-Event-Loop"><a href="#事件轮询-Event-Loop" class="headerlink" title="事件轮询(Event Loop)"></a>事件轮询(Event Loop)</h2><ul>
<li>主线程会循环不断的从事件队列中读取事件</li>
<li>当读取到事件时，会首先判断主线程是否空闲，再判断当前函数的执行条件是否满足，如果上述两个要求均满足，则执行事件</li>
<li>setTimeout只是将事件放入了事件队列，必须等到主线程空闲才会去执行。因此，定时函数不一定会在执行的时间内执行<h2 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h2></li>
<li>行内绑定</li>
<li>绑定到DOM元素上</li>
<li>addEventListener / attachEvent<ul>
<li>addEventListener(“事件名”，“事件处理函数”，false);设置为false为允许冒泡<h3 id="阻止冒泡和阻止默认行为"><a href="#阻止冒泡和阻止默认行为" class="headerlink" title="阻止冒泡和阻止默认行为"></a>阻止冒泡和阻止默认行为</h3></li>
</ul>
</li>
<li>阻止冒泡：event.stopPropagation() / event.cancelBubble = true(兼容IE)</li>
<li>阻止默认行为：event.preventDefault() / event.returnValue = false(兼容IE)或者return false(不能阻止使用 addEventListener 绑定的事件)</li>
<li>在jQuery中，return false既可以阻止冒泡，又可以阻止默认行为<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"www.baidu.com"</span> <span class="attr">id</span>=<span class="string">"jump"</span>&gt;</span>跳转<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.getElementById(<span class="string">"jump"</span>);</div><div class="line">a.addEventListener(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="comment">//此处不能阻止默认行为</span></div><div class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;);</div><div class="line">a.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="comment">//此处可以阻止默认行为</span></div><div class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h2><ul>
<li>将子元素的事件委托到父元素中处理</li>
<li>jQuery中的on和delegate可是实现事件委托，原理如下<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"target"</span>&gt;</span> </div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item 1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item 2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item 3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item 4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item 5<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>item 6<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"><span class="comment">//使用该方法需要给多个元素绑定事件，消耗内存</span></div><div class="line">	<span class="comment">/*var lis = document.getElementsByTagName("li");</span></div><div class="line">    for(var i=0;i&lt;lis.length;i++)&#123;</div><div class="line">        lis[i].onclick = function()&#123;</div><div class="line">            console.log(this.innerHTML);</div><div class="line">        &#125;</div><div class="line">    &#125;*/</div><div class="line"><span class="comment">//使用事件委托只需要给父元素绑定事件即可</span></div><div class="line">    <span class="keyword">var</span> ul = <span class="built_in">document</span>.getElementById(<span class="string">"target"</span>);</div><div class="line">    ul.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</div><div class="line">        event = event||<span class="built_in">window</span>.event;</div><div class="line">        <span class="keyword">var</span> target = event.target||event.srcElement;</div><div class="line">        <span class="built_in">console</span>.log(target.innerHTML);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params">obj,type,fn</span>)</span>&#123;</div><div class="line">    obj.listener = obj.listener||&#123;&#125;;</div><div class="line">    obj.listener[type] = obj.listener[type]||[];</div><div class="line">    obj.listener[type].push(fn);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">fireEvent</span>(<span class="params">obj,type</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> arr = obj.listener[type];</div><div class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;arr.length;i++)&#123;</div><div class="line">        arr[i]();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> obj = &#123;&#125;;</div><div class="line">addEvent(obj,<span class="string">"aaa"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">111</span>)&#125;);</div><div class="line">addEvent(obj,<span class="string">"bbb"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">222</span>)&#125;);</div><div class="line">addEvent(obj,<span class="string">"ccc"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">333</span>)&#125;);</div><div class="line">addEvent(obj,<span class="string">"ddd"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">444</span>)&#125;);</div><div class="line">fireEvent(obj,<span class="string">"aaa"</span>);</div><div class="line"><span class="comment">/*</span></div><div class="line">//自定义事件的数据结构</div><div class="line">obj.listener = &#123;&#125;;</div><div class="line">//属性作为事件名称，数组为放置事件函数的列表</div><div class="line">obj.listener.aaa = [function()&#123;&#125;];</div><div class="line">*/</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/22/F03-面向对象-闭包/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/22/F03-面向对象-闭包/" itemprop="url">
                  面向对象-闭包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-22T00:00:00+08:00">
                2016-05-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="作用域与闭包"><a href="#作用域与闭包" class="headerlink" title="作用域与闭包"></a>作用域与闭包</h1><h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><ul>
<li>全局作用域</li>
<li>函数作用域</li>
<li><strong>没有块级作用域</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="keyword">var</span> a = <span class="number">123</span>;</div><div class="line">  <span class="built_in">console</span>.log(a);</div><div class="line">&#125;</div><div class="line"><span class="comment">//可以访问的到a</span></div><div class="line"><span class="built_in">console</span>.log(a);</div><div class="line"><span class="comment">//if和for也构成代码块</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)&#123;</div><div class="line">&#125;</div><div class="line"><span class="built_in">console</span>.log(i);<span class="comment">//5</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h2><ul>
<li>函数内层作用域可以访问函数外层作用，反之则不可。</li>
<li>平级的函数之间不可以相互访问<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</div><div class="line">	<span class="keyword">var</span> b = <span class="number">20</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> c = <span class="number">30</span>;</div><div class="line">		<span class="built_in">console</span>.log(a+b+c);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> d = <span class="number">40</span>;</div><div class="line">		<span class="built_in">console</span>.log(a+b+d);</div><div class="line">	&#125;</div><div class="line">	fn();</div><div class="line">	fn1();</div><div class="line">&#125;</div><div class="line">foo();</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="js运行分为两个阶段"><a href="#js运行分为两个阶段" class="headerlink" title="js运行分为两个阶段"></a>js运行分为两个阶段</h2><ul>
<li>预解析</li>
<li>全局预解析<ul>
<li>所有的变量和函数声明都会提前，同名的函数和变量，函数的优先级高(即先提升变量，再提升函数)</li>
</ul>
</li>
<li><p>函数内部预解析</p>
<ul>
<li>所有变量、函数和形参都会预解析（函数&gt;形参&gt;变量）<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a</span>)</span>&#123;</div><div class="line">	<span class="built_in">console</span>.log(a);<span class="comment">//输出的是function a()&#123;&#125;</span></div><div class="line">	<span class="keyword">var</span> a = <span class="number">123</span>;</div><div class="line">	<span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">&#125;</div><div class="line">foo(<span class="number">123</span>);</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>执行</p>
<ul>
<li>先预解析全局作用域，然后执行全局作用域中的代码，再执行全局代码的过程中，遇到函数调用，就会先进行函数的预解析，再执行内部的代码</li>
</ul>
</li>
</ul>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><ul>
<li>函数的嵌套形成闭包(内层函数和内层函数所处的作用域)</li>
<li>闭包的组成：内层函数+内层函数所处的作用域</li>
<li>闭包的作用：延长变量的生命周期，缓存中间状态值</li>
<li>闭包可以操作函数内部的变量(间接)</li>
<li>一般函数在执行完毕后，所处的环境会消失，闭包不会，因为闭包中还存在着对该环境的引用<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> n = <span class="built_in">Math</span>.random();</div><div class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> n;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> inner = foo();</div><div class="line"><span class="keyword">var</span> ret = inner();</div><div class="line"><span class="keyword">var</span> ret1 = inner();</div><div class="line"><span class="comment">//两个值相同</span></div><div class="line"><span class="built_in">console</span>.log(ret);</div><div class="line"><span class="built_in">console</span>.log(ret1);</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">	<span class="keyword">var</span> arr = [];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</div><div class="line">		arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">          <span class="comment">//当前的环境下没有i，所以就会向上查找，当找到i时，循环已经结束，此时i=3</span></div><div class="line">			<span class="built_in">console</span>.log(i);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	arr[<span class="number">0</span>]();<span class="comment">//3</span></div><div class="line">	arr[<span class="number">1</span>]();<span class="comment">//3</span></div><div class="line">	arr[<span class="number">2</span>]();<span class="comment">//3</span></div><div class="line"><span class="comment">//下面的代码的执行结果是0,1，2</span></div><div class="line"><span class="comment">//因为i在arr[i]被调用的时候重新赋值了</span></div><div class="line">	<span class="comment">/*for(var i=0;i&lt;3;i++)&#123;</span></div><div class="line">      arr[i]();</div><div class="line">	&#125;*/</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> arr = [];</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</div><div class="line">	arr[i] = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="built_in">console</span>.log(num);</div><div class="line">		&#125;</div><div class="line">	&#125;)(i);</div><div class="line">&#125;</div><div class="line">arr[<span class="number">0</span>]();<span class="comment">//0</span></div><div class="line">arr[<span class="number">1</span>]();<span class="comment">//1</span></div><div class="line">arr[<span class="number">2</span>]();<span class="comment">//2</span></div></pre></td></tr></table></figure>
<ul>
<li><p><strong>经典题型</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> arr = [];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">		<span class="keyword">return</span> arr[i] = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> i;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//为什么此时的i不会被重新赋值？？？</span></div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">	<span class="built_in">console</span>.log(foo()[i]());<span class="comment">//输出为10个10</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>如果想要达到预期效果，可以使用闭包</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> arr = [];</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">		<span class="keyword">return</span> (<span class="function"><span class="keyword">function</span>(<span class="params">n</span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">				<span class="keyword">return</span> n;</div><div class="line">			&#125;</div><div class="line">		&#125;)(i);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)&#123;</div><div class="line">	<span class="built_in">console</span>.log(foo()[i]());<span class="comment">//输出0-9；</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>闭包的机制领悟</strong></li>
<li>闭包是能够有权访问其他环境中变量的函数。也就是闭包可以记住它被创建时的环境。</li>
<li>浏览器用“栈”来维护执行上下文（也就是函数的运行环境），当前正在运行的函数会处于栈顶，当函数执行完毕后会出栈，然后将下一个元素作为当前的上下文。</li>
<li>当遇到闭包时，外部函数并未出栈，闭包就已经进栈了，所以外部函数还在栈中占据着一块空间。实际上外部函数的闭包数据被存在了堆中，这样才能在闭包执行完毕后（已经出栈后）内部的变量还一直存在。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//函数a进栈</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> num = <span class="number">1</span>;</div><div class="line"><span class="comment">//当执行到该处时，函数a还未执行完毕，此时，闭包进栈</span></div><div class="line"><span class="comment">//由于栈遵循先入后出的原则，因此在闭包执行之前，函数a不会出栈</span></div><div class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">    num++;</div><div class="line">    <span class="built_in">console</span>.log(num);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/20/F02-面向对象-函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/20/F02-面向对象-函数/" itemprop="url">
                  面向对象-函数
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-20T00:00:00+08:00">
                2016-05-20
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ul>
<li><strong>window 是Window的实例</strong></li>
<li>所有的函数都是Function的实例<ul>
<li>Function也是一个函数</li>
<li>所以Function也是Function的实例<h2 id="函数的三种角色"><a href="#函数的三种角色" class="headerlink" title="函数的三种角色"></a>函数的三种角色</h2></li>
</ul>
</li>
<li>构造函数</li>
<li>普通函数</li>
<li>函数作为对象</li>
<li><strong>函数的角色取决于函数的调用</strong><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line"><span class="keyword">var</span> foo = <span class="keyword">new</span> Foo();<span class="comment">//作为构造函数</span></div><div class="line">Foo();<span class="comment">//作为普通函数</span></div><div class="line">Foo.info = <span class="string">"hello"</span>;<span class="comment">//函数作为对象</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="函数的属性"><a href="#函数的属性" class="headerlink" title="函数的属性"></a>函数的属性</h2><ul>
<li>arguments：保存实参的类数组<ul>
<li>arguments.callee:指向函数本身​</li>
</ul>
</li>
<li>length：形参的个数</li>
<li>caller：函数的调用者</li>
<li>name：函数的名称<h2 id="函数声明和函数表达式的区别"><a href="#函数声明和函数表达式的区别" class="headerlink" title="函数声明和函数表达式的区别"></a>函数声明和函数表达式的区别</h2></li>
<li>函数声明是在预解析阶段创建的，函数表达式是在程序执行阶段创建的，即函数表达式不会被预解析，只会提升变量，函数的赋值留在原地</li>
<li>函数声明可以在全局作用域或者局部作用域中创建，函数表达式只能在表达式中定义<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"> <span class="comment">//在内存中只开辟一块空间存放函数</span></div><div class="line"><span class="keyword">var</span> fn = flag?<span class="function"><span class="keyword">function</span>(<span class="params">&#123;console.log(<span class="number">123</span></span>)&#125;:<span class="title">function</span>(<span class="params">&#123;console.log(<span class="number">456</span></span>)&#125;;</span></div><div class="line">    //根据浏览器的不同有的会开辟一块空间，有的会开辟两块空间</div><div class="line">    <span class="title">if</span>(<span class="params">flag</span>)&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;<span class="keyword">else</span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(<span class="number">2</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="函数调用的方式"><a href="#函数调用的方式" class="headerlink" title="函数调用的方式"></a>函数调用的方式</h2><ul>
<li>函数中this的指向取决于函数的调用方式</li>
<li>1、构造函数，在new的时候调用</li>
<li>2、普通函数</li>
<li>3、对象方法：对象.方法() </li>
<li>4、call/apply/bind<ul>
<li>bind ES5的新特性</li>
<li>bind 也可以改变this的指向</li>
<li>bind 在改变this的同时不调用函数</li>
<li>bind 会返回一个新的函数，新函数中的内容还是原来的函数的内容，只是this的指向改变了<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">a,b</span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(a+b);</div><div class="line">   &#125;</div><div class="line">   <span class="comment">//使用bind时不会调用函数</span></div><div class="line">   <span class="keyword">var</span> fn = foo.bind(&#123;<span class="attr">info</span>:<span class="string">"nihao"</span>&#125;,<span class="number">12</span>,<span class="number">13</span>);</div><div class="line">   <span class="comment">//调用函数</span></div><div class="line">   fn();</div></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h3 id="this的不同指向"><a href="#this的不同指向" class="headerlink" title="this的不同指向"></a>this的不同指向</h3><ul>
<li>构造函数中的this指向实例对象，原型方法中的this也指向实例对象 </li>
<li>在非严格模式下，普通函数中的this指向window，严格模式下指向undefine</li>
<li>对象方法中的this指向该对象，实际上就是方法的调用者</li>
<li>事件方法中的this指的是绑定事件的对象</li>
<li>定时函数中的this指向的是window</li>
<li>call、apply所调用的函数中的this就是call和apply的第一个参数(该参数必须为引用类型)<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><h3 id="作为参数的函数-回调函数"><a href="#作为参数的函数-回调函数" class="headerlink" title="作为参数的函数(回调函数)"></a>作为参数的函数(回调函数)</h3><strong>模拟jQuery封装原理</strong><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">jQuery</span>(<span class="params">selector</span>) </span>&#123;</div><div class="line">	<span class="keyword">return</span> <span class="keyword">new</span> jQuery.prototype.init(selector);</div><div class="line">&#125;</div><div class="line"><span class="comment">//模拟jQuery中的each</span></div><div class="line">jQuery.each = <span class="function"><span class="keyword">function</span>(<span class="params">objs,callback</span>)</span>&#123;</div><div class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;objs.length;i++)&#123;</div><div class="line">		callback.call(objs[i],i,objs[i]);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">jQuery.fn = jQuery.prototype = &#123;</div><div class="line">	<span class="attr">init</span>:<span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">		<span class="keyword">var</span> elements = <span class="built_in">document</span>.getElementsByTagName(selector);</div><div class="line">		<span class="keyword">this</span>.length = elements.length;</div><div class="line">		<span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="keyword">this</span>.length;i++)&#123;</div><div class="line">        	<span class="comment">//this指的是init的实例</span></div><div class="line">			<span class="comment">//这里是给实例添加属性</span></div><div class="line">			<span class="keyword">this</span>[i] = elements[i];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">this</span>.showLen = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="keyword">this</span>.length;</div><div class="line">		&#125;</div><div class="line">	&#125;,</div><div class="line">	<span class="attr">showMsg</span>:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">"abc"</span>);</div><div class="line">	&#125;,</div><div class="line">	<span class="attr">each</span>:<span class="function"><span class="keyword">function</span>(<span class="params">callback</span>)</span>&#123;</div><div class="line">		jQuery.each(<span class="keyword">this</span>,callback);</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="comment">//该操作是为了保证jQuery.prototype.init的实例可以访问jQuery.prototype中的属性</span></div><div class="line">jQuery.prototype.init.prototype = jQuery.prototype;</div><div class="line"><span class="built_in">window</span>.$ = <span class="built_in">window</span>.jQuery = jQuery;</div><div class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">	<span class="keyword">var</span> divs = jQuery(<span class="string">"div"</span>);</div><div class="line">	<span class="built_in">console</span>.log(divs.length);</div><div class="line">	divs.each(<span class="function"><span class="keyword">function</span>(<span class="params">index,element</span>)</span>&#123;</div><div class="line">		<span class="keyword">this</span>.innerHTML = index;</div><div class="line">	&#125;)</div><div class="line">&#125;</div><div class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="jquery链式结构原理"><a href="#jquery链式结构原理" class="headerlink" title="jquery链式结构原理"></a>jquery链式结构原理</h3><ul>
<li>在方法内部返会调用该方法的对象，即this<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">  $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">        <span class="function"><span class="keyword">function</span> <span class="title">jQuery</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">           <span class="keyword">return</span> <span class="keyword">new</span> jQuery.prototype.init(selector);</div><div class="line">        &#125;</div><div class="line">        jQuery.prototype = &#123;</div><div class="line">            <span class="attr">constructor</span> : jQuery,</div><div class="line">            <span class="attr">html</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="number">123</span>);</div><div class="line"><span class="comment">//返回了实例对象，实例对象又可以通过原型链找到css，init等其他函数进行调用，因此可以链式编程</span></div><div class="line">                <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">css</span> : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">                <span class="built_in">console</span>.log(<span class="number">456</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">            &#125;,</div><div class="line">            <span class="attr">init</span> : <span class="function"><span class="keyword">function</span>(<span class="params">selector</span>)</span>&#123;</div><div class="line">                <span class="comment">// 实现选择器功能</span></div><div class="line">                <span class="keyword">var</span> aDiv = <span class="built_in">document</span>.getElementsByTagName(selector);</div><div class="line">                <span class="comment">// 把每一个div都放到this中，那么this就是一个类数组</span></div><div class="line">                [].push.apply(<span class="keyword">this</span>,aDiv);</div><div class="line">                <span class="keyword">this</span>.length = aDiv.length;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        jQuery.prototype.init.prototype = jQuery.prototype;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h2><ul>
<li>eval(): 可以把字符串转化成js代码，并执行<ul>
<li><code>eval(&quot;var a = 123;console.log(a)&quot;)</code></li>
</ul>
</li>
<li>Math 不是函数  是对象</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/05/18/F01-面向对象-原型/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Qcyue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/tx.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Shining Moon">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/05/18/F01-面向对象-原型/" itemprop="url">
                  原型和继承
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-05-18T00:00:00+08:00">
                2016-05-18
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/面向对象/" itemprop="url" rel="index">
                    <span itemprop="name">面向对象</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="面向对象-原型"><a href="#面向对象-原型" class="headerlink" title="面向对象-原型"></a>面向对象-原型</h1><h2 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h2><ul>
<li>例对象和原型对象之间形成的链式结构，该链式结构通过<code>__proto__</code>连接起来<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><h3 id="原型继承"><a href="#原型继承" class="headerlink" title="原型继承"></a>原型继承</h3><strong>缺点</strong></li>
<li>没有办法在不影响所有实例的情况下，修改继承过来的属性</li>
<li>继承过来的引用类型的数据，是所有实例共享的<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Animal</span>(<span class="params">name,voice</span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">      <span class="keyword">this</span>.voice = voice;</div><div class="line">      <span class="keyword">this</span>.favour=[<span class="string">"sleeping"</span>,<span class="string">"jumping"</span>];</div><div class="line">  &#125;</div><div class="line">  Animal.prototype.cry = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name = <span class="keyword">this</span>.voice);</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">color</span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.color = color;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> animal = <span class="keyword">new</span> Animal(<span class="string">"tom"</span>,<span class="string">"miaomiao"</span>);</div><div class="line">	Cat.prototype = <span class="keyword">new</span> Animal(<span class="string">"tom"</span>,<span class="string">"喵喵"</span>);</div><div class="line">  Cat.prototype.tree= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="string">"上树"</span>);</div><div class="line">  &#125;</div><div class="line">  <span class="comment">//此时，两个cat的name属性都是tom</span></div><div class="line">  <span class="keyword">var</span> cat = <span class="keyword">new</span> Cat(<span class="string">"blue"</span>);</div><div class="line">  <span class="keyword">var</span> cat1 = <span class="keyword">new</span> Cat(<span class="string">"black"</span>);</div><div class="line">  cat.favour.push(<span class="string">"eating"</span>);</div><div class="line">  <span class="built_in">console</span>.log(cat1.favour);<span class="comment">//[sleeping,jumping,eating]</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="借用构造函数继承"><a href="#借用构造函数继承" class="headerlink" title="借用构造函数继承"></a>借用构造函数继承</h3><ul>
<li><strong> 缺点</strong></li>
<li>没有办法继承父级构造函数原型上的成员<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,favour</span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.name = name;</div><div class="line">      <span class="keyword">this</span>.favour = favour;</div><div class="line">  &#125;</div><div class="line">  Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">num,name,favour</span>) </span>&#123;</div><div class="line">      <span class="comment">//this指向Student够造函数的实例</span></div><div class="line">      Person.call(<span class="keyword">this</span>,name,favour);</div><div class="line">      <span class="keyword">this</span>.num = num;</div><div class="line">  &#125;</div><div class="line">  <span class="keyword">var</span> stu1 = <span class="keyword">new</span> Student(<span class="number">1</span>,<span class="string">"zhangsan"</span>,[<span class="string">"singing"</span>]);</div><div class="line">  <span class="keyword">var</span> stu2 = <span class="keyword">new</span> Student(<span class="number">2</span>,<span class="string">"lisi"</span>,[<span class="string">"dancing"</span>]);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="组合继承"><a href="#组合继承" class="headerlink" title="组合继承"></a>组合继承</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name,favour</span>) </span>&#123;</div><div class="line">       <span class="keyword">this</span>.name = name;</div><div class="line">       <span class="keyword">this</span>.favour = favour;</div><div class="line">   &#125;</div><div class="line">   Person.prototype.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">       <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</div><div class="line">   &#125;;</div><div class="line">   <span class="function"><span class="keyword">function</span> <span class="title">Teacher</span>(<span class="params">name,favour,level</span>) </span>&#123;</div><div class="line">       Person.call(<span class="keyword">this</span>,name,favour);</div><div class="line">       <span class="keyword">this</span>.level = level;</div><div class="line">   &#125;</div><div class="line">   Teacher.prototype = <span class="keyword">new</span> Person();</div><div class="line">   <span class="keyword">var</span> teacher = <span class="keyword">new</span> Teacher(<span class="string">"zhangsan"</span>,<span class="string">"sleep"</span>,<span class="string">"T5"</span>);</div><div class="line">   teacher.showName();</div></pre></td></tr></table></figure>
<h3 id="call和apply"><a href="#call和apply" class="headerlink" title="call和apply"></a>call和apply</h3><ul>
<li>可以调用函数</li>
<li>改变所调用的函数内部的this指向</li>
<li>在非严格模式下，全局函数中this的指向是window</li>
<li>在严格模式下，全局函数中this指向的是undefined</li>
<li>call和apply的第一参数是要改变的对象</li>
<li>在改变的同时也可以给函数传参 <h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="属性的复制"><a href="#属性的复制" class="headerlink" title="属性的复制"></a>属性的复制</h3></li>
<li><p><strong>原生js中属性的复制</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> obj1=&#123;&#125;;</div><div class="line"><span class="keyword">var</span> obj2=&#123;</div><div class="line">  <span class="attr">name</span>:<span class="string">"zhang"</span>,</div><div class="line">  <span class="attr">age</span>:<span class="number">23</span>,</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">extend</span>(<span class="params">des,origin</span>)</span>&#123;</div><div class="line">  <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> des)&#123;</div><div class="line">    des[key]=origin[key];</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>jQuery中属性的复制</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">set</span>)</span>&#123;<span class="comment">//可以加多个参数，都在defaultSetting的基础上添加</span></div><div class="line">     <span class="keyword">var</span> dafaultSetting=&#123;</div><div class="line">       <span class="attr">width</span>:<span class="string">"100"</span>,</div><div class="line">       <span class="attr">height</span>:<span class="string">"200"</span>,</div><div class="line">       <span class="attr">background</span>:<span class="string">"red"</span>,</div><div class="line">       <span class="attr">sets</span>:&#123;</div><div class="line">         <span class="attr">flag</span>:<span class="number">12</span>,</div><div class="line">         <span class="attr">msg</span>:<span class="string">"message"</span></div><div class="line">       &#125;</div><div class="line">     &#125;</div><div class="line">     extends(<span class="literal">true</span>,defaultSetting,set);</div><div class="line">&#125;</div><div class="line"><span class="keyword">var</span> setting=&#123;</div><div class="line">     <span class="attr">opacity</span>:<span class="number">.5</span>,</div><div class="line">     <span class="attr">width</span>:<span class="string">"300"</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//调用函数</span></div><div class="line">foo(setting);</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Object-creat"><a href="#Object-creat" class="headerlink" title="Object.creat()"></a>Object.creat()</h3><ul>
<li>ES5中的新特性<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> o = &#123;</div><div class="line">       <span class="attr">name</span> : <span class="string">'tom'</span>,</div><div class="line">       <span class="attr">color</span> : <span class="string">'blue'</span></div><div class="line">   &#125;</div><div class="line">   <span class="keyword">var</span> o1 = <span class="built_in">Object</span>.create(o);</div><div class="line">   <span class="built_in">console</span>.dir(o1);</div><div class="line">   <span class="built_in">console</span>.log(o1.name);</div><div class="line">   <span class="built_in">console</span>.log(o1.color);</div><div class="line">   </div><div class="line">   <span class="comment">//兼容ie代码</span></div><div class="line">   <span class="keyword">var</span> create = <span class="function"><span class="keyword">function</span>(<span class="params">param</span>)</span>&#123;</div><div class="line">       <span class="keyword">if</span>(<span class="built_in">Object</span>.create)&#123;</div><div class="line">           <span class="keyword">return</span> <span class="built_in">Object</span>.create(param);</div><div class="line">       &#125;<span class="keyword">else</span>&#123;</div><div class="line">           <span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125;</div><div class="line">           Foo.prototype = param;</div><div class="line">           <span class="keyword">return</span> <span class="keyword">new</span> Foo();</div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/tx.jpg"
               alt="Qcyue" />
          <p class="site-author-name" itemprop="name">Qcyue</p>
           
              <p class="site-description motion-element" itemprop="description">生活，我们是认真的！</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">47</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Qcyue</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  






  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
